# 기술 요구사항 명세서 (TRD)

## 1. Executive Technical Summary

- **프로젝트 개요**: 본 문서는 '이웃집 수달' 웹사이트 구축을 위한 기술적 접근법과 아키텍처를 정의합니다. Next.js의 정적 사이트 생성(SSG) 기능을 최대한 활용하여 별도의 백엔드 서버와 데이터베이스 없이, 빠르고 안정적이며 검색 엔진에 최적화된 정보 제공 및 마케팅 웹사이트를 구축하는 것을 목표로 합니다. 모든 콘텐츠는 정적 파일(JSON, Markdown)로 관리하며, 예약 기능은 네이버 예약으로, 미디어 콘텐츠는 YouTube 임베드를 통해 외부 서비스와 연동합니다.
- **핵심 기술 스택**: 프론트엔드 프레임워크로 **Next.js 14 (App Router)**를 사용하며, **TypeScript**로 타입 안정성을 확보합니다. UI는 **TailwindCSS**로 신속하게 개발하고, **Framer Motion**을 통해 생동감 있는 사용자 경험을 제공합니다.
- **주요 기술 목표**:
  - **성능**: Lighthouse 성능 점수 90점 이상, 페이지 로드 시간 3초 이내 달성.
  - **안정성**: 서버리스 정적 호스팅을 통해 99.9% 이상의 가용성 확보.
  - **SEO**: 모든 페이지에 대한 완벽한 SEO 최적화 및 Lighthouse SEO 점수 95점 이상 달성.
  - **접근성**: WCAG 2.1 AA 표준 준수 및 Lighthouse 접근성 점수 100점 목표.
- **핵심 기술 가정**:
  - 백엔드 애플리케이션 및 데이터베이스는 구축하지 않습니다.
  - 모든 콘텐츠(동물 프로필, 공지사항 등)는 Git을 통해 버전 관리되는 정적 파일 형태로 관리되며, 업데이트 시 재배포(re-deploy)가 필요합니다.
  - 예약 기능은 전적으로 외부 서비스인 '네이버 예약'에 의존하며, 본 웹사이트는 해당 페이지로 사용자를 안내하는 역할만 수행합니다.
  - 사용자 인증 및 로그인 기능은 요구되지 않습니다.

## 2. 기술 스택

| 카테고리        | 기술 / 라이브러리                        | 선정 사유                                                                                                                                                                     |
| :-------------- | :--------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **프레임워크**  | Next.js 14+ (App Router)                 | 정적 사이트 생성(SSG)에 최적화되어 빠른 로딩 속도와 우수한 SEO 성능을 보장합니다. App Router는 서버 컴포넌트를 활용하여 초기 로딩 성능을 극대화합니다.                        |
| **언어**        | TypeScript                               | 컴파일 타임에 타입을 검사하여 코드의 안정성과 유지보수성을 높입니다. 정적 데이터 구조를 명확하게 정의하는 데 필수적입니다.                                                    |
| **스타일링**    | TailwindCSS                              | 유틸리티 우선 접근 방식으로 빠르고 일관된 UI 개발이 가능하며, 반응형 디자인을 효율적으로 구현할 수 있습니다. `clsx`와 함께 사용합니다.                                        |
| **애니메이션**  | Framer Motion                            | 선언적인 API를 통해 복잡하고 미려한 애니메이션을 쉽게 구현할 수 있으며, Next.js와 통합이 용이합니다. PRD의 동적인 UI 요구사항을 충족합니다.                                   |
| **상태 관리**   | Zustand / React Context API              | 전역 상태가 거의 없는 정적 사이트 특성상, 간단한 클라이언트 상태는 Context API로, 필요 시 가벼운 전역 상태는 Zustand로 관리하여 오버헤드를 최소화합니다.                      |
| **UI 컴포넌트** | Radix UI (Headless) / Lucide React       | Radix UI는 접근성이 보장된 헤드리스 컴포넌트를 제공하여 TailwindCSS와 결합 시 커스텀 디자인 구현이 용이합니다. Lucide React는 가볍고 일관된 아이콘을 제공합니다.              |
| **콘텐츠 관리** | JSON / Markdown 파일                     | 데이터베이스 없이 동물 프로필, 프로그램 정보, 공지사항 등을 정적 파일로 관리합니다. Git으로 버전 관리가 가능하며, 비개발자의 콘텐츠 수정 용이성을 위해 마크다운을 활용합니다. |
| **지도**        | 카카오맵/네이버맵 웹 위젯                | 별도 API 키 발급 없이 제공되는 공식 임베드 코드를 사용하여 '오시는 길' 페이지에 지도를 간편하게 통합합니다.                                                                   |
| **배포/호스팅** | 직접 서버 또는 원하는 정적 호스팅 서비스 | Vercel 등 자동화된 플랫폼을 사용하지 않고, 빌드 산출물을 직접 서버에 업로드하거나 원하는 정적 호스팅 서비스(예: Netlify, GitHub Pages, 자체 서버 등)에 수동 배포합니다.       |

## 3. 시스템 아키텍처 설계

### 최상위 빌딩 블록

- **Next.js 프론트엔드 애플리케이션**: 사용자와 직접 상호작용하는 핵심 웹 애플리케이션입니다.
  - **하위 블록**: App Router 기반 라우팅, 서버 컴포넌트(SSG), 클라이언트 컴포넌트(상호작용 UI), `next/image`를 통한 이미지 최적화.
- **정적 콘텐츠 저장소**: 프로젝트 내 로컬 디렉토리에 위치하며, 웹사이트의 모든 데이터를 담고 있는 파일 기반 저장소입니다.
  - **하위 블록**: 동물 프로필(`json`), 프로그램 정보(`json`), 공지사항(`md`), FAQ(`json`).
- **외부 서비스 연동**: 웹사이트 기능을 보강하기 위해 임베드 또는 링크 형태로 연동되는 서드파티 서비스입니다.
  - **하위 블록**: 네이버 예약(단순 링크), YouTube 임베드(`iframe`), 카카오/네이버 지도 위젯(`iframe`), 인스타그램 위젯(임베드 코드).

### 최상위 컴포넌트 상호작용 다이어그램

```mermaid
graph TD
    subgraph "사용자 환경"
        A[사용자 브라우저]
    end

subgraph "배포 서버 또는 정적 호스팅 환경"
    B[Next.js 애플리케이션]
end

    subgraph "프로젝트 저장소 (Git)"
        C[정적 콘텐츠 저장소<br>(JSON, MD 파일)]
    end

    subgraph "외부 서비스"
        D[네이버 예약]
        E[YouTube]
        F[카카오/네이버 지도]
    end

    A -- HTTPS 요청 --> B
    B -- 빌드 시 데이터 로드 --> C
    B -- 렌더링 --> A
    A -- 하이퍼링크 클릭 --> D
    A -- iframe 임베드 --> E
    A -- iframe 임베드 --> F
```

- 사용자는 브라우저를 통해 수동 배포된 Next.js 애플리케이션에 접속합니다.
- Next.js 애플리케이션은 빌드 시점에 Git 저장소 내의 정적 콘텐츠(JSON, MD 파일)를 읽어와 정적 HTML 페이지를 생성합니다.
- 생성된 페이지는 직접 관리하는 서버 또는 선택한 정적 호스팅 환경을 통해 사용자에게 제공됩니다.
- 사용자는 페이지 내에서 '네이버 예약' 버튼을 클릭하여 외부 예약 사이트로 이동하거나, 임베드된 YouTube 영상 및 지도를 직접 조작합니다.

### 코드 구성 및 규칙

**도메인 주도 구성 전략**

- **도메인 분리**: 비즈니스 도메인을 기준으로 코드를 구성합니다. 예: `user-journey` (메인, 소개), `animal-world` (동물 친구들), `visitor-center` (이용안내, 예약), `community-hub` (커뮤니티).
- **레이어 기반 아키텍처**: 각 도메인 내에서 `components`, `lib`, `data` 등 기술적 관심사를 분리하여 구조를 명확히 합니다.
- **기능 기반 모듈**: 특정 페이지나 기능을 구성하는 파일들을 하나의 폴더에 그룹화합니다. (예: `app/(main)/page.tsx`, `app/(main)/_components/hero-section.tsx`)
- **공유 컴포넌트**: 여러 도메인에서 재사용되는 UI 컴포넌트, 타입, 유틸리티 등은 `packages/ui`, `packages/lib` 등 공유 모듈에 배치합니다.

**범용 파일 및 폴더 구조 (모노레포)**

pnpm 워크스페이스를 사용한 모노레포 구조를 채택하여 코드 재사용성과 관리 효율성을 높입니다.

```
/
├── apps
│   └── web/                  # Next.js 애플리케이션
│       ├── app/              # App Router 디렉토리
│       │   ├── (main)/       # 메인 페이지 그룹
│       │   │   ├── page.tsx
│       │   │   └── _components/
│       │   ├── about/        # 소개 페이지
│       │   ├── animals/      # 동물 친구들 페이지
│       │   ├── community/    # 커뮤니티 페이지
│       │   ├── info/         # 이용 안내 페이지
│       │   ├── programs/     # 프로그램 및 예약 페이지
│       │   ├── layout.tsx    # 루트 레이아웃
│       │   └── globals.css   # 전역 스타일
│       ├── components/       # web 앱 전용 비공유 컴포넌트
│       ├── public/           # 정적 에셋 (이미지, 폰트)
│       ├── next.config.mjs
│       └── package.json
├── packages
│   ├── ui/                   # 공유 UI 컴포넌트 (Button, Card 등)
│   ├── config/               # 공유 설정 (ESLint, TypeScript)
│   ├── lib/                  # 공유 유틸리티, 훅, 타입 정의
│   └── content/              # 정적 콘텐츠 (JSON, Markdown)
│       ├── animals.json
│       ├── programs.json
│       └── notices/
│           └── 2024-01-01-hello.md
├── package.json
└── pnpm-workspace.yaml
```

### 데이터 흐름 및 통신 패턴

- **클라이언트-서버 통신**: 대부분의 페이지는 SSG로 생성되어 서버 통신이 거의 없습니다. 클라이언트 사이드 네비게이션은 Next.js 라우터를 통해 이루어지며, 필요한 데이터는 페이지 props로 이미 전달된 상태입니다.
- **데이터베이스 상호작용**: 해당 없음. 모든 데이터는 빌드 시점에 `packages/content` 디렉토리의 정적 파일로부터 로드됩니다.
- **외부 서비스 통합**:
  - **네이버 예약**: 단순 `<a>` 태그를 통한 아웃바운드 링크.
  - **YouTube/지도**: `iframe`을 사용한 표준 임베드 방식. 보안을 위해 `sandbox` 속성 사용을 고려합니다.
  - **인스타그램**: 공식 임베드 위젯 또는 API 사용이 어려울 경우, 수동으로 큐레이션된 게시물 이미지를 업로드하고 원본 링크를 제공하는 방식으로 대체합니다.
- **실시간 통신**: 해당 없음.
- **데이터 동기화**: 콘텐츠(동물 프로필, 공지사항 등) 변경 시, Git 저장소에 해당 파일을 수정/추가한 뒤, 직접 빌드 및 배포 과정을 거쳐 변경사항을 사이트에 반영합니다. 별도의 자동화된 CI/CD 파이프라인 없이 수동 배포를 원칙으로 합니다.

## 4. 성능 및 최적화 전략

- **정적 우선 아키텍처**: 정보성 페이지는 모두 SSG(Static Site Generation)로, 동적 데이터가 필요한 최소한의 컴포넌트만 클라이언트 컴포넌트로 구현하여 서버 부하를 없애고 전송 속도를 극대화합니다.
- **이미지 최적화**: 모든 이미지는 `next/image` 컴포넌트를 통해 렌더링합니다. 이를 통해 자동으로 WebP 포맷 변환, 사이즈 최적화, lazy loading이 적용되어 LCP(Largest Contentful Paint) 지표를 개선합니다.
- **애니메이션 최적화**: Framer Motion의 `whileInView` 속성을 적극 활용하여 사용자의 뷰포트에 진입한 요소만 애니메이션을 실행합니다. `transform`과 `opacity` 속성 위주로 애니메이션을 구성하여 리페인트(repaint) 비용을 최소화합니다.
- **코드 분할 및 번들 최적화**: Next.js App Router는 페이지 단위로 코드를 자동 분할합니다. `@next/bundle-analyzer`를 주기적으로 사용하여 불필요하게 큰 라이브러리가 포함되지 않았는지 확인하고, 필요한 경우 `next/dynamic`을 사용하여 클라이언트 컴포넌트를 동적으로 로드합니다.

## 5. 구현 로드맵 및 마일스톤

### 1단계: 기반 구축 (MVP 구현)

- **핵심 인프라**: pnpm 모노레포 설정, Next.js 프로젝트 초기화, Vercel 연동 및 CI/CD 파이프라인 구축.
- **필수 기능**: 메인 레이아웃(헤더, 푸터), 네비게이션 구현. 메인 랜딩 페이지, 이웃집수달 소개, 이용 안내 페이지의 정적 콘텐츠 렌더링.
- **기본 보안**: 외부 링크에 `rel="noopener noreferrer"` 적용.
- **개발 환경**: ESLint, Prettier, TypeScript 설정 공유.
- **예상 기간**: 2주

### 2단계: 기능 강화

- **고급 기능**: 동물 친구들 페이지(정적 JSON 데이터 기반), 체험 프로그램 페이지 구현.
- **외부 연동**: YouTube 영상 임베드 컴포넌트, 카카오/네이버 지도 위젯 구현. 모든 프로그램에 '네이버 예약' 외부 링크 연결.
- **애니메이션 적용**: Framer Motion을 사용한 페이지 트랜지션, 스크롤 기반 애니메이션, 호버 효과 등 PRD에 명시된 주요 애니메이션 구현.
- **예상 기간**: 3주

### 3단계: 확장 및 최적화

- **커뮤니티 기능**: 공지사항(Markdown 기반), 포토 갤러리, 미디어 노출 페이지 등 정적 콘텐츠 기반 커뮤니티 기능 구현.
- **성능 최적화**: Lighthouse 점수 측정 및 개선. 이미지, 폰트, 번들 사이즈 최적화 집중.
- **품질 보증**: 크로스 브라우저 테스트(Chrome, Safari, Edge), 모바일/태블릿 반응형 디자인 최종 검수, 접근성(A11y) 검토 및 수정.
- **SEO 최종 작업**: 구조화된 데이터(Schema.org), `sitemap.xml`, `robots.txt` 생성 및 제출.
- **예상 기간**: 2주

## 6. 위험 평가 및 완화 전략

### 기술적 위험 분석

- **기술 위험**: Framer Motion의 과도한 사용은 성능 저하를 유발할 수 있습니다.
  - **완화 전략**:
